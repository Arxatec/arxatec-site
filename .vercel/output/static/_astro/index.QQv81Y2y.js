import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.BVOCwoKb.js";import{a as h}from"./index.C6lpJo1F.js";import{a as v}from"./index.C88pvD_q.js";import{F as j}from"./XMarkIcon.DeJ4nHTq.js";const S=()=>{if(document.getElementById("modal-animations"))return;const t=document.createElement("style");t.id="modal-animations",t.textContent=`
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes scaleIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
    @keyframes scaleOut { from { transform: scale(1); opacity: 1; } to { transform: scale(0.95); opacity: 0; } }
    
    .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
    .animate-scaleIn { animation: scaleIn 0.3s ease-out; }
    .animate-fadeOut { animation: fadeOut 0.3s ease-out forwards; }
    .animate-scaleOut { animation: scaleOut 0.3s ease-out forwards; }
  `,document.head.appendChild(t)},w={create:async(t,l)=>{try{return{success:!0,data:(await v.post("https://arxatec-service-production.up.railway.app/api/v1/waitlist",{email:t,name:l})).data}}catch(s){if(s.response){const i=s.response.status;if(i===400)return{success:!1,error:"Este correo electrónico ya está suscrito. Por favor verifica que tu correo electrónico sea correcto e intenta nuevamente."};if(i===404)return{success:!1,error:"El servicio de suscripción no está disponible en este momento. Por favor intenta más tarde o contacta con soporte."}}return{success:!1,error:s.response?.data?.error||s.message||"Ha ocurrido un error al procesar tu solicitud. Por favor intenta nuevamente más tarde."}}}},p=({onClick:t,className:l="",size:s=4})=>e.jsx("button",{className:`absolute hover:bg-gray-200 rounded-full p-2 transition-all duration-200 ${l}`,onClick:t,"aria-label":"Cerrar",children:e.jsx(j,{className:`size-${s} text-gray-900 pointer-events-none`,strokeWidth:2})}),k=({props:t,onSubmit:l,isSubmitting:s,errors:i,submitError:o,onChange:f,formValues:m})=>e.jsxs("form",{className:"w-full mt-4 gap-2 flex flex-col",onSubmit:l,children:[e.jsx(y,{label:t.form.name.label,type:"text",placeholder:t.form.name.placeholder,name:"name",error:i.name,onChange:d=>f("name",d.target.value),value:m.name,required:!0}),e.jsx(y,{label:t.form.email.label,type:"email",placeholder:t.form.email.placeholder,name:"email",error:i.email,onChange:d=>f("email",d.target.value),value:m.email,required:!0}),e.jsx("button",{type:"submit",className:"w-full mt-6 rounded-md bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 disabled:opacity-70",disabled:s,children:s?"Enviando...":t.form.submit}),o&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:o}),e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:[t.terms.p1," ",e.jsx("a",{href:"/terminos-y-condiciones",className:"underline text-gray-900",children:t.terms.p2})," ",t.terms.p3," ",e.jsx("a",{href:"/politica-de-privacidad",className:"underline text-gray-900",children:t.terms.p4}),"."]})]}),y=({label:t,type:l="text",placeholder:s="",name:i,error:o,onChange:f,required:m=!1,value:d=""})=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{htmlFor:i,className:"block text-sm/6 font-medium text-gray-900",children:[t," ",m&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:i,type:l,name:i,placeholder:s,className:`w-full rounded-md bg-white px-3 py-2 text-gray-900 outline outline-1 -outline-offset-1 ${o?"outline-red-500":"outline-gray-300"} placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-blue-600 text-sm`,onChange:f,value:d,"aria-invalid":o?"true":"false"}),o&&e.jsx("p",{className:"text-sm text-red-500",role:"alert",children:o})]});function O({props:t}){const[l,s]=n.useState({name:"",email:"",errors:{},isSubmitting:!1,submitError:""}),[i,o]=n.useState({isModalActive:localStorage.getItem("IS_MODAL_ACTIVE")||"false",isSubscribeModalOpen:!1,isSubscribeModalClosing:!1,isThankYouModalOpen:!1,isThankYouModalClosing:!1});n.useEffect(()=>{S()},[]),n.useEffect(()=>{const a=localStorage.setItem;localStorage.setItem=function(r,b){a.call(this,r,b),window.dispatchEvent(new Event("localStorageUpdated"))};const u=()=>{o(r=>({...r,isModalActive:localStorage.getItem("IS_MODAL_ACTIVE")||"false"}))};return window.addEventListener("localStorageUpdated",u),()=>{window.removeEventListener("localStorageUpdated",u),localStorage.setItem=a}},[]),n.useEffect(()=>{o(a=>({...a,isSubscribeModalOpen:a.isModalActive==="true"}))},[i.isModalActive]);const f=n.useCallback((a,u)=>{s(r=>({...r,[a]:u}))},[]),m=n.useCallback(()=>{const a={},{name:u,email:r}=l;return u.trim()||(a.name="El nombre es requerido"),r.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||(a.email="El email no es válido"):a.email="El email es requerido",s(b=>({...b,errors:a})),Object.keys(a).length===0},[l.name,l.email]),d=n.useCallback(async a=>{if(a.preventDefault(),s(c=>({...c,submitError:"",isSubmitting:!0})),!m()){s(c=>({...c,isSubmitting:!1}));return}const{name:u,email:r}=l,b=await w.create(r,u);b.success?(x(),setTimeout(()=>{o(c=>({...c,isThankYouModalOpen:!0})),s(c=>({...c,name:"",email:"",isSubmitting:!1}))},300)):s(c=>({...c,submitError:b.error,isSubmitting:!1}))},[l,m]),x=n.useCallback(()=>{o(a=>({...a,isSubscribeModalClosing:!0})),setTimeout(()=>{o(a=>({...a,isSubscribeModalOpen:!1,isSubscribeModalClosing:!1}))},300)},[]),g=n.useCallback(()=>{o(a=>({...a,isThankYouModalClosing:!0})),setTimeout(()=>{o(a=>({...a,isThankYouModalOpen:!1,isThankYouModalClosing:!1}))},300)},[]);return e.jsxs(e.Fragment,{children:[i.isSubscribeModalOpen&&e.jsx("div",{className:`w-screen top-0 left-0 h-screen bg-black/80 fixed z-[100] md:items-center items-start justify-center p-4 overflow-y-auto flex transition-all duration-300 ease-in-out ${i.isSubscribeModalClosing?"animate-fadeOut":"animate-fadeIn"}`,"aria-modal":"true",role:"dialog","aria-labelledby":"subscription-modal-title",children:e.jsxs("div",{className:`w-full max-w-6xl h-fit overflow-auto bg-white rounded-lg grid md:grid-cols-2 shadow-md p-2 relative grid-cols-1 transition-all duration-300 ease-in-out ${i.isSubscribeModalClosing?"animate-scaleOut":"animate-scaleIn"}`,children:[e.jsx(p,{onClick:x,className:"top-4 right-4 modal-suscribe-button"}),e.jsx("div",{className:"h-full",children:e.jsx("img",{src:h.modals.suscribe,alt:"Un abogado en su oficina",className:"w-full h-full overflow-hidden object-cover rounded-md",loading:"lazy"})}),e.jsxs("div",{className:"lg:p-8 px-2 py-4",children:[e.jsx("h1",{id:"subscription-modal-title",className:"w-full text-xl lg:text-2xl font-bold text-gray-900",children:t.title}),e.jsx("p",{className:"w-full lg:text-base text-sm text-gray-500 mt-2",children:t.description}),e.jsx(k,{props:t,onSubmit:d,isSubmitting:l.isSubmitting,errors:l.errors,submitError:l.submitError,onChange:f,formValues:l})]})]})}),i.isThankYouModalOpen&&e.jsxs("div",{className:`w-screen top-0 left-0 h-screen bg-white fixed z-[110] flex flex-col items-center justify-center p-8 transition-all duration-300 ease-in-out ${i.isThankYouModalClosing?"animate-fadeOut":"animate-fadeIn"}`,"aria-modal":"true",role:"dialog","aria-labelledby":"thank-you-modal-title",children:[e.jsx(p,{onClick:g,className:"top-4 right-8",size:5}),e.jsxs("div",{className:`max-w-2xl text-center transition-all duration-300 ease-in-out ${i.isThankYouModalClosing?"animate-scaleOut":"animate-scaleIn"}`,children:[e.jsx("img",{src:h.icon_logo,alt:"Gracias por suscribirte",className:"w-40 h-40 mx-auto mb-6 object-cover rounded-full",loading:"lazy"}),e.jsx("h1",{id:"thank-you-modal-title",className:"text-3xl font-bold text-gray-900 mb-4",children:"¡Gracias por suscribirte!"}),e.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Estamos muy contentos de que te hayas unido a nuestra lista. Pronto recibirás noticias nuestras."}),e.jsx("button",{onClick:g,className:"inline-block transition-all rounded-md bg-blue-600 px-6 py-3 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500",children:"Volver a la página"})]})]})]})}export{O as default};
