import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.BVOCwoKb.js";import{a as b}from"./index.C88pvD_q.js";function w({title:a,titleId:t,...s},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),a?r.createElement("title",{id:t},a):null,r.createElement("path",{fillRule:"evenodd",d:"M2 4.25A2.25 2.25 0 0 1 4.25 2h7.5A2.25 2.25 0 0 1 14 4.25v5.5A2.25 2.25 0 0 1 11.75 12h-1.312c.1.128.21.248.328.36a.75.75 0 0 1 .234.545v.345a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-.345a.75.75 0 0 1 .234-.545c.118-.111.228-.232.328-.36H4.25A2.25 2.25 0 0 1 2 9.75v-5.5Zm2.25-.75a.75.75 0 0 0-.75.75v4.5c0 .414.336.75.75.75h7.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 0 0-.75-.75h-7.5Z",clipRule:"evenodd"}))}const u=r.forwardRef(w);function y({title:a,titleId:t,...s},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),a?r.createElement("title",{id:t},a):null,r.createElement("path",{d:"M8.543 2.232a.75.75 0 0 0-1.085 0l-5.25 5.5A.75.75 0 0 0 2.75 9H4v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1a1 1 0 1 1 2 0v1a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1V9h1.25a.75.75 0 0 0 .543-1.268l-5.25-5.5Z"}))}const p=r.forwardRef(y);function v({title:a,titleId:t,...s},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),a?r.createElement("title",{id:t},a):null,r.createElement("path",{d:"M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"}))}const j=r.forwardRef(v),N=[{id:"1",content:"How can I help you?",sender:"bot",timestamp:new Date}],C=async a=>{try{return(await b.post("https://arxatec-service-production.up.railway.app/api/v1/chatbot/send-message",{message:a})).data.data}catch(t){return t.response?.data||t.message}},E=({setOpenChat:a,props:t})=>{const[s,n]=r.useState({messages:N,isTyping:!1}),[i,l]=r.useState(!0),c=r.useRef(null),x=()=>{c.current?.scrollIntoView({behavior:"smooth"})};r.useEffect(()=>{x()},[s.messages,s.isTyping]);const m=async o=>{l(!1);const g={id:Date.now().toString(),content:o,sender:"user",timestamp:new Date};n(d=>({...d,messages:[...d.messages,g],isTyping:!0}));const h=await C(o),f={id:(Date.now()+1).toString(),content:h,sender:"bot",timestamp:new Date};n(d=>({...d,messages:[...d.messages,f],isTyping:!1}))};return e.jsxs("div",{className:"flex flex-col h-[600px] w-full max-w-md mx-auto rounded-lg shadow-lg overflow-hidden bg-white fixed bottom-0 right-0 md:bottom-4 md:right-4 z-50",children:[e.jsxs("div",{className:"p-2 border-b border-gray-100 bg-white flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center ",children:[!i&&e.jsx("button",{className:"p-1 rounded-full hover:bg-gray-100 transition-all",onClick:()=>l(!0),children:e.jsx(p,{className:"size-5 text-gray-600"})}),e.jsx("p",{className:"text-sm font-semibold text-gray-600 ml-2",children:t.name})]}),e.jsx("button",{className:"p-1 rounded-full hover:bg-gray-100 transition-all",onClick:()=>a(!1),children:e.jsx(j,{className:"size-5 text-gray-600"})})]}),i?e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto bg-white flex items-center justify-center relative",children:[e.jsx("div",{className:"absolute bottom-0 w-full h-full z-0 bg-gradient-to-b via-blue-100 from-transparent to-blue-200 from-20% "}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-700 whitespace-pre-line",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 justify-start mt-6 flex-wrap",children:[e.jsx("button",{className:"text-sm border border-gray-500 text-gray-500 px-2 rounded-md py-1 transition-all hover:bg-gray-700 hover:text-white hover:border-gray-700",onClick:()=>m(t.questions.question1),children:t.questions.question1}),e.jsx("button",{className:"text-sm border border-gray-500 text-gray-500 px-2 rounded-md py-1 transition-all hover:bg-gray-700 hover:text-white hover:border-gray-700",onClick:()=>m(t.questions.question2),children:t.questions.question2}),e.jsx("button",{className:"text-sm border border-gray-500 text-gray-500 px-2 rounded-md py-1 transition-all hover:bg-gray-700 hover:text-white hover:border-gray-700",onClick:()=>m(t.questions.question3),children:t.questions.question3})]})]})]}):e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto bg-white",children:[s.messages.slice(1).map(o=>e.jsx($,{message:o,props:t},o.id)),s.isTyping&&e.jsx(D,{}),e.jsx("div",{ref:c})]}),e.jsx(q,{onSendMessage:m,disabled:s.isTyping})]})};function R({title:a,titleId:t,...s},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),a?r.createElement("title",{id:t},a):null,r.createElement("path",{fillRule:"evenodd",d:"M4.848 2.771A49.144 49.144 0 0 1 12 2.25c2.43 0 4.817.178 7.152.52 1.978.292 3.348 2.024 3.348 3.97v6.02c0 1.946-1.37 3.678-3.348 3.97-1.94.284-3.916.455-5.922.505a.39.39 0 0 0-.266.112L8.78 21.53A.75.75 0 0 1 7.5 21v-3.955a48.842 48.842 0 0 1-2.652-.316c-1.978-.29-3.348-2.024-3.348-3.97V6.741c0-1.946 1.37-3.68 3.348-3.97Z",clipRule:"evenodd"}))}const S=r.forwardRef(R);function z({title:a,titleId:t,...s},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),a?r.createElement("title",{id:t},a):null,r.createElement("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"}))}const M=r.forwardRef(z),q=({onSendMessage:a,disabled:t=!1})=>{const[s,n]=r.useState(""),i=l=>{l.preventDefault(),s.trim()&&!t&&(a(s),n(""))};return e.jsx("form",{onSubmit:i,className:"border-t border-gray-200 p-4 bg-white",children:e.jsxs("div",{className:"flex items-center rounded-md border border-gray-300 bg-white",children:[e.jsx("input",{type:"text",value:s,onChange:l=>n(l.target.value),placeholder:"Escribir mensaje...",className:"flex-1 py-1 px-2 outline-none text-sm",disabled:t}),e.jsx("button",{type:"submit",className:`p-2 rounded-r-md ${s.trim()&&!t?"bg-gray-700 text-white":"bg-gray-100 text-gray-400"}`,disabled:!s.trim()||t,"aria-label":"Send message",children:e.jsx(M,{className:"size-4 "})})]})})},$=({message:a,props:t})=>{const s=a.sender==="bot";function n(){const i=new Date,l=i.getHours().toString().padStart(2,"0"),c=i.getMinutes().toString().padStart(2,"0");return`${l}:${c}`}return e.jsx("div",{className:`flex w-full ${s?"justify-start":"justify-end"} mb-4`,children:e.jsxs("div",{className:`flex max-w-[80%] ${s?"flex-row":"flex-row-reverse"}`,children:[s&&e.jsx("div",{className:`flex items-center justify-center size-7 rounded-full ${s?"bg-gray-100 text-gray-600 mr-2":""} `,children:e.jsx(u,{className:"size-5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:`text-xs text-gray-500 mb-2 ${s?"text-left":"text-right"}`,children:[s?"":`${t.you}`," ",n(a.timestamp)]}),s?e.jsx("div",{dangerouslySetInnerHTML:{__html:a.content},className:' text-sm bg-white text-gray-600 whitespace-pre-line " '}):e.jsx("div",{className:" text-sm px-2 py-1 rounded-tl-md rounded-bl-md rounded-br-md bg-gray-200 text-gray-900 whitespace-pre-line",children:a.content})]})]})})},D=()=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex items-center justify-center size-7 rounded-full bg-gray-100 text-gray-500 mr-2 ",children:e.jsx(u,{className:"size-5"})}),e.jsxs("div",{className:"flex items-center space-x-0.5 p-2 bg-gray-100 w-fit rounded-md",children:[e.jsx("div",{className:"size-1 rounded-full bg-gray-400 animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"size-1 rounded-full bg-gray-400 animate-pulse",style:{animationDelay:"300ms"}}),e.jsx("div",{className:"size-1 rounded-full bg-gray-400 animate-pulse",style:{animationDelay:"600ms"}})]})]});function B({props:a}){const[t,s]=r.useState(!1);return e.jsxs("div",{children:[e.jsx("button",{className:"fixed bottom-4 right-4 rounded-full bg-blue-600 z-40 p-4 hover:bg-blue-500 transition-all shadow-blue-600 shadow-2xl",onClick:()=>s(!t),children:e.jsx(S,{className:"size-6 text-white"})}),t&&e.jsx(E,{setOpenChat:s,props:a})]})}export{B as default};
