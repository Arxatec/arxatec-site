---
import { languageList, useTranslations } from "../../../../i18n/";
const currentLang = Astro.currentLocale || "es";

const translateLabels = useTranslations(
  currentLang as keyof typeof languageList
);

const pricingData = {
  planTitles: [
    {
      key: "free",
      label: translateLabels("home.pricing.free.title"),
      price: translateLabels("home.pricing.free.price"),
    },
    {
      key: "basic",
      label: translateLabels("home.pricing.basic.title"),
      price: translateLabels("home.pricing.basic.price"),
    },
    {
      key: "premium",
      label: translateLabels("home.pricing.premium.title"),
      price: translateLabels("home.pricing.premium.price"),
    },
  ],
  categories: [
    {
      name: translateLabels("pricing.list.product.title"),
      features: [
        {
          name: translateLabels("pricing.list.product.features.1"),
          values: { free: true, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.product.features.2"),
          values: { free: "1", basic: "3", premium: "Unlimited" },
        },
        {
          name: translateLabels("pricing.list.product.features.3"),
          values: { free: "3", basic: "20", premium: "Unlimited" },
        },
        {
          name: translateLabels("pricing.list.product.features.4"),
          values: { free: false, basic: false, premium: true },
        },
        {
          name: translateLabels("pricing.list.product.features.5"),
          values: { free: false, basic: false, premium: true },
        },
        {
          name: translateLabels("pricing.list.product.features.6"),
          values: { free: false, basic: false, premium: true },
        },
      ],
    },
    {
      name: translateLabels("pricing.list.management.title"),
      features: [
        {
          name: translateLabels("pricing.list.management.features.1"),
          values: { free: true, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.management.features.2"),
          values: { free: "1", basic: "3", premium: "Unlimited" },
        },
        {
          name: translateLabels("pricing.list.management.features.3"),
          values: { free: "3", basic: "20", premium: "Unlimited" },
        },
        {
          name: translateLabels("pricing.list.management.features.4"),
          values: { free: false, basic: false, premium: true },
        },
      ],
    },
    {
      name: translateLabels("pricing.list.messaging.title"),
      features: [
        {
          name: translateLabels("pricing.list.messaging.features.1"),
          values: { free: true, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.messaging.features.2"),
          values: { free: false, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.messaging.features.3"),
          values: { free: false, basic: false, premium: true },
        },
      ],
    },
    {
      name: translateLabels("pricing.list.cases.title"),
      features: [
        {
          name: translateLabels("pricing.list.cases.features.1"),
          values: { free: true, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.cases.features.2"),
          values: { free: false, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.cases.features.3"),
          values: { free: false, basic: false, premium: true },
        },
        {
          name: translateLabels("pricing.list.cases.features.4"),
          values: { free: false, basic: false, premium: true },
        },
      ],
    },
    {
      name: translateLabels("pricing.list.community.title"),
      features: [
        {
          name: translateLabels("pricing.list.community.features.1"),
          values: { free: true, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.community.features.2"),
          values: { free: false, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.community.features.3"),
          values: { free: false, basic: false, premium: true },
        },
        {
          name: translateLabels("pricing.list.community.features.4"),
          values: { free: false, basic: false, premium: true },
        },
      ],
    },
    {
      name: translateLabels("pricing.list.payments.title"),
      features: [
        {
          name: translateLabels("pricing.list.payments.features.1"),
          values: { free: true, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.payments.features.2"),
          values: { free: false, basic: true, premium: true },
        },
        {
          name: translateLabels("pricing.list.payments.features.3"),
          values: { free: false, basic: false, premium: true },
        },
        {
          name: translateLabels("pricing.list.payments.features.4"),
          values: { free: false, basic: false, premium: true },
        },
      ],
    },
  ],
};
---

<div class="pb-24 sm:pb-32 mx-auto max-w-7xl px-6 lg:px-8">
  <div class="bg-white rounded-xl shadow-sm overflow-hidden px-6 lg:px-8">
    <div class="isolate pt-10 pb-10 hidden lg:block">
      <div class="relative -mx-8">
        <div class="absolute inset-x-4 inset-y-0 -z-10 flex">
          <div
            class="flex w-1/4 px-4"
            style="margin-left: 50%"
            aria-hidden="true"
          >
            <div
              class="w-full rounded-xl border-2 border-blue-600 bg-blue-100/5"
            >
            </div>
          </div>
        </div>
        <table
          class="w-full table-fixed border-separate border-spacing-x-8 text-left"
        >
          <caption class="sr-only"> Pricing plan comparison </caption>
          <colgroup>
            <col class="w-1/4" />
            {pricingData.planTitles.map(() => <col class="w-1/4" />)}
          </colgroup>

          <tbody>
            <tr>
              <th
                scope="colgroup"
                class="pb-4 pt-4 text-sm/6 font-semibold text-gray-900"
              >
                {pricingData.categories[0].name}
                <div class="absolute inset-x-8 mt-4 h-px bg-gray-900/10"></div>
              </th>
              {
                pricingData.planTitles.map((plan) => (
                  <th
                    scope="col"
                    class="pb-4 pt-4 text-sm/6 font-semibold text-gray-900"
                  >
                    <div class="text-sm/7 font-semibold text-gray-900 text-center">
                      {plan.label}
                    </div>
                  </th>
                ))
              }
            </tr>

            {
              pricingData.categories.map((category, categoryIndex) => (
                <>
                  {category.features.map((feature, featureIndex) => (
                    <tr>
                      <th
                        scope="row"
                        class="py-4 text-sm/6 font-normal text-grey-900"
                      >
                        {feature.name}
                        <div class="absolute inset-x-8 mt-4 h-px bg-gray-900/5" />
                      </th>
                      {pricingData.planTitles.map((plan) => (
                        <td class="px-6 py-4 xl:px-8">
                          {
                            // @ts-ignore
                            typeof feature.values[plan.key] === "boolean" ? (
                              // @ts-ignore
                              feature.values[plan.key] ? (
                                <>
                                  <svg
                                    class="mx-auto size-5 text-blue-600"
                                    viewBox="0 0 20 20"
                                    fill="currentColor"
                                    aria-hidden="true"
                                    data-slot="icon"
                                  >
                                    <path
                                      fill-rule="evenodd"
                                      d="M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z"
                                      clip-rule="evenodd"
                                    />
                                  </svg>
                                  <span class="sr-only">
                                    Included in {plan.key}
                                  </span>
                                </>
                              ) : (
                                <>
                                  <svg
                                    class="mx-auto size-5 text-gray-400"
                                    viewBox="0 0 20 20"
                                    fill="currentColor"
                                    aria-hidden="true"
                                    data-slot="icon"
                                  >
                                    <path
                                      fill-rule="evenodd"
                                      d="M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z"
                                      clip-rule="evenodd"
                                    />
                                  </svg>
                                  <span class="sr-only">
                                    Not included in {plan.key}
                                  </span>
                                </>
                              )
                            ) : (
                              <div class="text-center text-sm/6 text-gray-500">
                                {
                                  // @ts-ignore
                                  feature.values[plan.key]
                                }
                              </div>
                            )
                          }
                        </td>
                      ))}
                    </tr>
                  ))}

                  {categoryIndex < pricingData.categories.length - 1 && (
                    <tr>
                      <th
                        scope="colgroup"
                        colspan={pricingData.planTitles.length - 1}
                        class="pb-4 pt-16 text-sm/6 font-semibold text-gray-900"
                      >
                        {pricingData.categories[categoryIndex + 1].name}
                        <div class="absolute inset-x-8 mt-4 h-px bg-gray-900/10" />
                      </th>
                    </tr>
                  )}
                </>
              ))
            }

            <tr>
              <th
                scope="colgroup"
                class="pb-4 pt-4 text-sm/6 font-semibold text-gray-900"
              >
              </th>

              {
                pricingData.planTitles.map((plan) => (
                  <th
                    scope="col"
                    class="pb-6 pt-4 text-sm/6 font-semibold text-gray-900 px-6"
                  >
                    <div class="text-sm/7 font-semibold text-gray-900 text-center">
                      {plan.label}
                    </div>
                    <p class="mt-6 flex gap-x-1 text-center items-center justify-center">
                      <span class="text-4xl font-semibold tracking-tight text-gray-900">
                        ${plan.price}
                      </span>
                      <span class="text-sm/6 font-semibold text-gray-600">
                        / {translateLabels("home.pricing.month")}
                      </span>
                    </p>
                    <button
                      aria-describedby="tier-freelancer"
                      class={
                        plan.key !== "free"
                          ? " modal-suscribe-button w-full mt-6 block rounded-md bg-blue-600 px-3 py-2 text-center text-sm/6 font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600"
                          : "modal-suscribe-button w-full mt-6 block rounded-md bg-white px-3 py-2 text-center text-sm/6 font-semibold text-blue-600 border border-blue-600 shadow-sm hover:bg-blue-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600"
                      }
                    >
                      {plan.key === "free"
                        ? translateLabels("home.pricing.startFree")
                        : translateLabels("home.pricing.buy")}
                    </button>
                  </th>
                ))
              }
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
